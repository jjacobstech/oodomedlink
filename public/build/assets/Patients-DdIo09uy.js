import{d as z,u as G,D as R,r as w,a as F,g as d,e as U,b as l,m as K,w as Q,f as e,n as m,p as P,q as x,v as p,t as o,o as i,F as N,h as M,x as k,s as _,A as $,z as D}from"./app-BzVj9sxl.js";import{_ as H}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-DaWEvVfo.js";import{u as I}from"./index-DkJRsqz2.js";import"./index-BRwck7xu.js";import"./x-BmJO-ghL.js";import"./index-CzOEaW2F.js";import"./ApplicationLogo.vue_vue_type_script_setup_true_lang-DrlMeWgO.js";import"./Wind-LiKkUfSx-CM-2iQGT.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const J={class:"flex w-full gap-1 h-full overflow-y-hidden bg-primaryLight"},W={class:"overflow-y-scroll w-full p-4 sm:p-6"},X={class:"flex flex-col sm:flex-row justify-between items-start gap-4 mb-6"},Y={class:"w-full sm:w-auto"},Z={class:"mb-6 flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between"},ee={class:"flex flex-wrap gap-2"},te={class:"flex flex-col sm:flex-row gap-2 w-full lg:w-auto"},se={class:"relative flex-1 lg:flex-initial"},le={class:"flex gap-2"},re={class:"mb-4 text-xs sm:text-sm text-gray-600"},oe={class:"lg:hidden space-y-4"},ae={class:"flex justify-between items-start"},ne={class:"flex-1 min-w-0"},de={class:"font-semibold text-gray-800 truncate"},ie={class:"text-sm text-gray-600 truncate"},ue={class:"inline-flex items-center justify-center rounded-full bg-blue-100 px-2.5 py-1 text-xs font-semibold text-blue-800 ml-2"},xe={class:"grid grid-cols-2 gap-2 text-xs text-gray-600"},me={class:"flex gap-2 pt-2"},pe=["onClick"],be=["onClick"],ge={key:0,class:"bg-white rounded-xl shadow-md p-8 text-center text-gray-500"},fe={class:"hidden lg:block overflow-x-auto rounded-xl bg-white shadow-md"},ye={class:"w-full text-sm"},ce={class:"divide-y divide-gray-200"},ve={class:"px-4 py-3 font-medium text-gray-800"},we={class:"px-4 py-3 text-gray-700"},he={class:"px-4 py-3 text-gray-700"},ke={class:"px-4 py-3 text-gray-700"},_e={class:"px-4 py-3 text-gray-700"},De={class:"px-4 py-3 text-center text-gray-700"},Ce={class:"inline-flex items-center justify-center rounded-full bg-blue-100 px-3 py-1 text-xs font-semibold text-blue-800"},Pe={class:"px-4 py-3 text-gray-600"},Ne={class:"px-4 py-3"},Se={class:"flex gap-2"},Ae=["onClick"],Ve=["onClick"],Ee={key:0},Fe={key:0,class:"mt-6 flex flex-col sm:flex-row items-center justify-between gap-4"},Ue=["disabled"],Me={class:"text-sm text-gray-600"},$e=["disabled"],qe={class:"w-full max-w-2xl bg-white rounded-xl shadow-2xl max-h-[90vh] overflow-y-auto"},je={key:0,class:"text-red-500 text-xs mt-1"},Be={key:0,class:"text-red-500 text-xs mt-1"},Le={key:0,class:"text-red-500 text-xs mt-1"},Oe={class:"flex flex-col sm:flex-row gap-3 pt-4"},Te=["disabled"],ze={class:"w-full max-w-2xl bg-white rounded-xl shadow-2xl max-h-[90vh] overflow-y-auto"},Ge={class:"sticky top-0 bg-white border-b p-4 sm:p-6"},Re={class:"text-xl sm:text-2xl font-bold text-gray-800"},Ke={key:0,class:"text-red-500 text-xs mt-1"},Qe={key:0,class:"text-red-500 text-xs mt-1"},He={key:0,class:"text-red-500 text-xs mt-1"},Ie={class:"flex flex-col sm:flex-row gap-3 pt-4"},Je=["disabled"],ot=z({__name:"Patients",props:{patients:{},filters:{}},setup(u){const S=u,q=G(),{toast:j}=I();R(()=>q.props.success,a=>{a&&j({title:"Success",description:a,variant:"default",class:"text-primaryDark bg-white shadow-lg",duration:5e3})},{immediate:!0});const b=w(S.filters?.gender||"all"),f=w(S.filters?.search||""),y=w(!1),c=w(!1),g=w(null),n=F({full_name:"",email:"",phone_no:"",gender:"",date_of_birth:"",address:""}),r=F({full_name:"",email:"",phone_no:"",gender:"",date_of_birth:"",address:""}),v=a=>{a!==void 0&&(b.value=a);const t={};b.value&&b.value!=="all"&&(t.gender=b.value),f.value&&f.value.trim()!==""&&(t.search=f.value.trim()),D.get(route("user.patients"),t,{preserveScroll:!0,preserveState:!0})},B=()=>{b.value="all",f.value="",D.get(route("user.patients"),{},{preserveScroll:!0,preserveState:!0})},A=a=>{a&&D.get(a,{},{preserveScroll:!0,preserveState:!0})},h=a=>a?new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A",V=a=>{D.visit(route("user.patients.show",a.id))},E=a=>{g.value=a,r.full_name=a.full_name,r.email=a.email,r.phone_no=a.phone_no,r.gender=a.gender,r.date_of_birth=a.date_of_birth||"",r.address=a.address||"",c.value=!0},L=()=>{n.post(route("user.patients.store"),{onSuccess:()=>{n.reset(),y.value=!1},onError:a=>{console.error("Add patient error:",a)}})},O=()=>{g.value&&r.put(route("user.patients.update",g.value.id),{onSuccess:()=>{r.reset(),c.value=!1,g.value=null},onError:a=>{}})},T=a=>{a.key==="Enter"&&v()};return(a,t)=>(i(),d(N,null,[U(l(K),{title:"Manage Patients"}),U(H,null,{default:Q(()=>[e("div",J,[e("div",W,[e("div",X,[t[24]||(t[24]=e("div",{class:"flex-1"},[e("h1",{class:"text-2xl sm:text-3xl font-bold text-gray-800"}," Patients Management "),e("p",{class:"text-sm sm:text-base text-gray-600 mt-1"}," View and manage all registered patients and their test results ")],-1)),e("div",Y,[e("button",{onClick:t[0]||(t[0]=s=>y.value=!0),class:"w-full sm:w-auto rounded-md bg-primaryDark px-4 sm:px-6 py-2.5 sm:py-3 text-sm sm:text-base font-semibold text-white transition-all duration-150 hover:-translate-y-1 hover:shadow-lg"}," + Add Patient ")])]),e("div",Z,[e("div",ee,[e("button",{onClick:t[1]||(t[1]=s=>v("all")),class:P([b.value==="all"?"bg-primaryDark text-white":"bg-gray-200 text-gray-700","rounded-lg px-3 sm:px-4 py-1.5 sm:py-2 text-sm font-medium transition-all hover:shadow-md"])}," All ",2),e("button",{onClick:t[2]||(t[2]=s=>v("Male")),class:P([b.value==="Male"?"bg-primaryDark text-white":"bg-gray-200 text-gray-700","rounded-lg px-3 sm:px-4 py-1.5 sm:py-2 text-sm font-medium transition-all hover:shadow-md"])}," Male ",2),e("button",{onClick:t[3]||(t[3]=s=>v("Female")),class:P([b.value==="Female"?"bg-primaryDark text-white":"bg-gray-200 text-gray-700","rounded-lg px-3 sm:px-4 py-1.5 sm:py-2 text-sm font-medium transition-all hover:shadow-md"])}," Female ",2)]),e("div",te,[e("div",se,[x(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>f.value=s),type:"text",placeholder:"Search by name, email or phone...",onKeydown:T,class:"w-full rounded-lg border border-gray-300 px-4 py-2 pl-10 text-sm focus:border-transparent focus:ring-2 focus:ring-primaryDark lg:w-80"},null,544),[[p,f.value]]),t[25]||(t[25]=e("span",{class:"absolute left-3 top-1/2 -translate-y-1/2 transform text-gray-400"},"ðŸ”",-1))]),e("div",le,[e("button",{onClick:t[5]||(t[5]=s=>v()),class:"flex-1 sm:flex-initial px-4 py-2 text-sm font-semibold text-white bg-primaryDark rounded-lg hover:bg-primaryDark/90 hover:shadow-lg whitespace-nowrap transition"}," Search "),e("button",{onClick:B,class:"flex-1 sm:flex-initial px-4 py-2 text-sm font-semibold text-white bg-gray-600 rounded-lg hover:bg-gray-700 hover:shadow-lg whitespace-nowrap transition"}," Clear ")])])]),e("div",re,[e("p",null," Showing "+o(u.patients.from||0)+" to "+o(u.patients.to||0)+" of "+o(u.patients.total)+" patients ",1)]),e("div",oe,[(i(!0),d(N,null,M(u.patients.data,s=>(i(),d("div",{key:s.id,class:"bg-white rounded-xl shadow-md p-4 space-y-3"},[e("div",ae,[e("div",ne,[e("h3",de,o(s.full_name),1),e("p",ie,o(s.email),1)]),e("span",ue,o(s.results_count),1)]),e("div",xe,[e("div",null,[t[26]||(t[26]=e("span",{class:"font-medium"},"Phone:",-1)),k(" "+o(s.phone_no||"N/A"),1)]),e("div",null,[t[27]||(t[27]=e("span",{class:"font-medium"},"Gender:",-1)),k(" "+o(s.gender||"N/A"),1)]),e("div",null,[t[28]||(t[28]=e("span",{class:"font-medium"},"DOB:",-1)),k(" "+o(h(s.date_of_birth)),1)]),e("div",null,[t[29]||(t[29]=e("span",{class:"font-medium"},"Last Result:",-1)),k(" "+o(s.latest_result?h(s.latest_result.uploaded_at):"N/A"),1)])]),e("div",me,[e("button",{onClick:C=>V(s),class:"flex-1 rounded-lg bg-blue-100 px-3 py-2 text-sm font-medium text-blue-700 transition hover:bg-blue-200"}," View ",8,pe),e("button",{onClick:C=>E(s),class:"flex-1 rounded-lg bg-green-100 px-3 py-2 text-sm font-medium text-green-700 transition hover:bg-green-200"}," Edit ",8,be)])]))),128)),u.patients.data.length===0?(i(),d("div",ge,[...t[30]||(t[30]=[e("div",{class:"text-4xl mb-2"},"ðŸ‘¥",-1),e("p",null,"No patients found.",-1)])])):m("",!0)]),e("div",fe,[e("table",ye,[t[32]||(t[32]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-semibold uppercase text-gray-700"}," Name "),e("th",{class:"px-4 py-3 text-left text-xs font-semibold uppercase text-gray-700"}," Email "),e("th",{class:"px-4 py-3 text-left text-xs font-semibold uppercase text-gray-700"}," Phone "),e("th",{class:"px-4 py-3 text-left text-xs font-semibold uppercase text-gray-700"}," Gender "),e("th",{class:"px-4 py-3 text-left text-xs font-semibold uppercase text-gray-700"}," Date of Birth "),e("th",{class:"px-4 py-3 text-left text-xs font-semibold uppercase text-gray-700"}," Total Results "),e("th",{class:"px-4 py-3 text-left text-xs font-semibold uppercase text-gray-700"}," Last Result "),e("th",{class:"px-4 py-3 text-left text-xs font-semibold uppercase text-gray-700"}," Actions ")])],-1)),e("tbody",ce,[(i(!0),d(N,null,M(u.patients.data,s=>(i(),d("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",ve,o(s.full_name),1),e("td",we,o(s.email),1),e("td",he,o(s.phone_no||"N/A"),1),e("td",ke,o(s.gender||"N/A"),1),e("td",_e,o(h(s.date_of_birth)),1),e("td",De,[e("span",Ce,o(s.results_count),1)]),e("td",Pe,o(s.latest_result?h(s.latest_result.uploaded_at):"N/A"),1),e("td",Ne,[e("div",Se,[e("button",{onClick:C=>V(s),class:"rounded bg-blue-100 px-3 py-1 text-xs font-medium text-blue-700 transition hover:bg-blue-200"}," View ",8,Ae),e("button",{onClick:C=>E(s),class:"rounded bg-green-100 px-3 py-1 text-xs font-medium text-green-700 transition hover:bg-green-200"}," Edit ",8,Ve)])])]))),128)),u.patients.data.length===0?(i(),d("tr",Ee,[...t[31]||(t[31]=[e("td",{colspan:"8",class:"px-4 py-8 text-center text-gray-500"}," No patients found. ",-1)])])):m("",!0)])])]),u.patients.last_page>1?(i(),d("div",Fe,[e("button",{onClick:t[6]||(t[6]=s=>A(u.patients.prev_page_url)),disabled:!u.patients.prev_page_url,class:"w-full sm:w-auto rounded-lg bg-primaryDark px-4 py-2 text-sm font-semibold text-white transition hover:bg-primaryDark/90 disabled:bg-gray-300 disabled:cursor-not-allowed"}," Previous ",8,Ue),e("span",Me," Page "+o(u.patients.current_page)+" of "+o(u.patients.last_page),1),e("button",{onClick:t[7]||(t[7]=s=>A(u.patients.next_page_url)),disabled:!u.patients.next_page_url,class:"w-full sm:w-auto rounded-lg bg-primaryDark px-4 py-2 text-sm font-semibold text-white transition hover:bg-primaryDark/90 disabled:bg-gray-300 disabled:cursor-not-allowed"}," Next ",8,$e)])):m("",!0),y.value?(i(),d("div",{key:1,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4",onClick:t[15]||(t[15]=_(s=>y.value=!1,["self"]))},[e("div",qe,[t[40]||(t[40]=e("div",{class:"sticky top-0 bg-white border-b p-4 sm:p-6"},[e("h3",{class:"text-xl sm:text-2xl font-bold text-gray-800"}," Add New Patient ")],-1)),e("form",{onSubmit:_(L,["prevent"]),class:"p-4 sm:p-6 space-y-4"},[e("div",null,[t[33]||(t[33]=e("label",{class:"block mb-2 text-sm font-bold text-gray-700"}," Full Name * ",-1)),x(e("input",{"onUpdate:modelValue":t[8]||(t[8]=s=>l(n).full_name=s),type:"text",required:"",class:"w-full px-3 sm:px-4 py-2 text-sm sm:text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-primaryDark focus:border-transparent",placeholder:"Enter full name"},null,512),[[p,l(n).full_name]]),l(n).errors.full_name?(i(),d("p",je,o(l(n).errors.full_name),1)):m("",!0)]),e("div",null,[t[34]||(t[34]=e("label",{class:"block mb-2 text-sm font-bold text-gray-700"}," Email * ",-1)),x(e("input",{"onUpdate:modelValue":t[9]||(t[9]=s=>l(n).email=s),type:"email",required:"",class:"w-full px-3 sm:px-4 py-2 text-sm sm:text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-primaryDark focus:border-transparent",placeholder:"Enter email address"},null,512),[[p,l(n).email]]),l(n).errors.email?(i(),d("p",Be,o(l(n).errors.email),1)):m("",!0)]),e("div",null,[t[35]||(t[35]=e("label",{class:"block mb-2 text-sm font-bold text-gray-700"}," Phone Number * ",-1)),x(e("input",{"onUpdate:modelValue":t[10]||(t[10]=s=>l(n).phone_no=s),type:"tel",required:"",class:"w-full px-3 sm:px-4 py-2 text-sm sm:text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-primaryDark focus:border-transparent",placeholder:"Enter phone number"},null,512),[[p,l(n).phone_no]]),l(n).errors.phone_no?(i(),d("p",Le,o(l(n).errors.phone_no),1)):m("",!0)]),e("div",null,[t[37]||(t[37]=e("label",{class:"block mb-2 text-sm font-bold text-gray-700"}," Gender * ",-1)),x(e("select",{"onUpdate:modelValue":t[11]||(t[11]=s=>l(n).gender=s),required:"",class:"w-full px-3 sm:px-4 py-2 text-sm sm:text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-primaryDark focus:border-transparent"},[...t[36]||(t[36]=[e("option",{value:""},"Select gender",-1),e("option",{value:"Male"},"Male",-1),e("option",{value:"Female"},"Female",-1),e("option",{value:"Other"},"Other",-1)])],512),[[$,l(n).gender]])]),e("div",null,[t[38]||(t[38]=e("label",{class:"block mb-2 text-sm font-bold text-gray-700"}," Date of Birth ",-1)),x(e("input",{"onUpdate:modelValue":t[12]||(t[12]=s=>l(n).date_of_birth=s),type:"date",class:"w-full px-3 sm:px-4 py-2 text-sm sm:text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-primaryDark focus:border-transparent"},null,512),[[p,l(n).date_of_birth]])]),e("div",null,[t[39]||(t[39]=e("label",{class:"block mb-2 text-sm font-bold text-gray-700"}," Address ",-1)),x(e("textarea",{"onUpdate:modelValue":t[13]||(t[13]=s=>l(n).address=s),rows:"3",class:"w-full px-3 sm:px-4 py-2 text-sm sm:text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-primaryDark focus:border-transparent",placeholder:"Enter address"},null,512),[[p,l(n).address]])]),e("div",Oe,[e("button",{type:"submit",disabled:l(n).processing,class:"flex-1 px-4 py-2 text-sm sm:text-base font-semibold text-white bg-primaryDark rounded-lg hover:bg-primaryDark/90 hover:shadow-lg transition disabled:bg-gray-400 disabled:cursor-not-allowed"},o(l(n).processing?"Adding...":"Add Patient"),9,Te),e("button",{type:"button",onClick:t[14]||(t[14]=()=>{y.value=!1,l(n).reset()}),class:"flex-1 px-4 py-2 text-sm sm:text-base font-semibold text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300 hover:shadow-lg transition"}," Cancel ")])],32)])])):m("",!0),c.value&&g.value?(i(),d("div",{key:2,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4",onClick:t[23]||(t[23]=_(s=>c.value=!1,["self"]))},[e("div",ze,[e("div",Ge,[e("h3",Re," Edit Patient: "+o(g.value.full_name),1)]),e("form",{onSubmit:_(O,["prevent"]),class:"p-4 sm:p-6 space-y-4"},[e("div",null,[t[41]||(t[41]=e("label",{class:"block mb-2 text-sm font-bold text-gray-700"}," Full Name * ",-1)),x(e("input",{"onUpdate:modelValue":t[16]||(t[16]=s=>l(r).full_name=s),type:"text",required:"",class:"w-full px-3 sm:px-4 py-2 text-sm sm:text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-primaryDark focus:border-transparent"},null,512),[[p,l(r).full_name]]),l(r).errors.full_name?(i(),d("p",Ke,o(l(r).errors.full_name),1)):m("",!0)]),e("div",null,[t[42]||(t[42]=e("label",{class:"block mb-2 text-sm font-bold text-gray-700"}," Email * ",-1)),x(e("input",{"onUpdate:modelValue":t[17]||(t[17]=s=>l(r).email=s),type:"email",required:"",class:"w-full px-3 sm:px-4 py-2 text-sm sm:text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-primaryDark focus:border-transparent"},null,512),[[p,l(r).email]]),l(r).errors.email?(i(),d("p",Qe,o(l(r).errors.email),1)):m("",!0)]),e("div",null,[t[43]||(t[43]=e("label",{class:"block mb-2 text-sm font-bold text-gray-700"}," Phone Number * ",-1)),x(e("input",{"onUpdate:modelValue":t[18]||(t[18]=s=>l(r).phone_no=s),type:"tel",required:"",class:"w-full px-3 sm:px-4 py-2 text-sm sm:text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-primaryDark focus:border-transparent"},null,512),[[p,l(r).phone_no]]),l(r).errors.phone_no?(i(),d("p",He,o(l(r).errors.phone_no),1)):m("",!0)]),e("div",null,[t[45]||(t[45]=e("label",{class:"block mb-2 text-sm font-bold text-gray-700"}," Gender * ",-1)),x(e("select",{"onUpdate:modelValue":t[19]||(t[19]=s=>l(r).gender=s),required:"",class:"w-full px-3 sm:px-4 py-2 text-sm sm:text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-primaryDark focus:border-transparent"},[...t[44]||(t[44]=[e("option",{value:""},"Select gender",-1),e("option",{value:"Male"},"Male",-1),e("option",{value:"Female"},"Female",-1),e("option",{value:"Other"},"Other",-1)])],512),[[$,l(r).gender]])]),e("div",null,[t[46]||(t[46]=e("label",{class:"block mb-2 text-sm font-bold text-gray-700"}," Date of Birth ",-1)),x(e("input",{"onUpdate:modelValue":t[20]||(t[20]=s=>l(r).date_of_birth=s),type:"date",class:"w-full px-3 sm:px-4 py-2 text-sm sm:text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-primaryDark focus:border-transparent"},null,512),[[p,l(r).date_of_birth]])]),e("div",null,[t[47]||(t[47]=e("label",{class:"block mb-2 text-sm font-bold text-gray-700"}," Address ",-1)),x(e("textarea",{"onUpdate:modelValue":t[21]||(t[21]=s=>l(r).address=s),rows:"3",class:"w-full px-3 sm:px-4 py-2 text-sm sm:text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-primaryDark focus:border-transparent"},null,512),[[p,l(r).address]])]),e("div",Ie,[e("button",{type:"submit",disabled:l(r).processing,class:"flex-1 px-4 py-2 text-sm sm:text-base font-semibold text-white bg-primaryDark rounded-lg hover:bg-primaryDark/90 hover:shadow-lg transition disabled:bg-gray-400 disabled:cursor-not-allowed"},o(l(r).processing?"Updating...":"Update Patient"),9,Je),e("button",{type:"button",onClick:t[22]||(t[22]=()=>{c.value=!1,l(r).reset(),g.value=null}),class:"flex-1 px-4 py-2 text-sm sm:text-base font-semibold text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300 hover:shadow-lg transition"}," Cancel ")])],32)])])):m("",!0)])])]),_:1})],64))}});export{ot as default};
