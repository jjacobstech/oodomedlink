import{d as B,r as c,u as S,a as g,b as V,e as r,h as L,w as O,f as e,g as w,n as D,i,v as u,t as n,o as m,F as E,j as z,m as h,Q as F,l as k}from"./app-D2V0QdeW.js";import{_ as G}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-CjQ8sXCa.js";import"./index-UBeE2Aye.js";import"./x-DVayrmzf.js";import"./index-CHKb_DJ8.js";import"./ApplicationLogo.vue_vue_type_script_setup_true_lang-BRc7ZUHv.js";import"./Wind-LiKkUfSx-CKihqZMt.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const T={class:"flex w-full gap-1 h-full overflow-y-hidden bg-primaryLight"},K={class:"overflow-y-scroll w-full p-6"},Q={class:"flex justify-between items-start mb-6"},R={class:"mb-6 flex flex-col gap-4 md:flex-row md:items-center md:justify-between"},H={class:"flex gap-2"},I={class:"flex gap-2 items-center w-full md:w-auto"},J={class:"relative flex-1 md:flex-initial"},W={class:"mb-4 text-sm text-gray-600"},X={class:"overflow-x-auto rounded-xl bg-white shadow-md"},Y={class:"w-full text-sm"},Z={class:"divide-y divide-gray-200"},ee={class:"px-4 py-3 font-medium text-gray-800"},te={class:"px-4 py-3 text-gray-700"},le={class:"px-4 py-3 text-gray-700"},re={class:"px-4 py-3 text-gray-700"},se={class:"px-4 py-3 text-gray-700"},oe={class:"px-4 py-3 text-center text-gray-700"},ae={class:"inline-flex items-center justify-center rounded-full bg-blue-100 px-3 py-1 text-xs font-semibold text-blue-800"},ne={class:"px-4 py-3 text-gray-600"},de={class:"px-4 py-3"},ie={class:"flex gap-2"},ue=["onClick"],pe=["onClick"],be={key:0},ge={key:0,class:"mt-6 flex items-center justify-between"},me=["disabled"],fe={class:"text-sm text-gray-600"},xe=["disabled"],ye={class:"w-full max-w-2xl p-6 bg-white rounded-xl shadow-2xl max-h-[90vh] overflow-y-auto"},ve={class:"flex gap-3 pt-4"},ce=["disabled"],we={class:"w-full max-w-2xl p-6 bg-white rounded-xl shadow-2xl max-h-[90vh] overflow-y-auto"},he={class:"mb-6 text-2xl font-bold text-gray-800"},ke={class:"flex gap-3 pt-4"},De=["disabled"],Ae=B({__name:"Patients",props:{patients:{},filters:{}},setup(d){const C=d,p=c(C.filters?.gender||"all"),f=c(C.filters?.search||""),x=c(!1),y=c(!1),b=c(null),a=S({full_name:"",email:"",phone_no:"",gender:"",date_of_birth:"",address:""}),o=S({full_name:"",email:"",phone_no:"",gender:"",date_of_birth:"",address:""}),v=s=>{s!==void 0&&(p.value=s);const t={};p.value&&p.value!=="all"&&(t.gender=p.value),f.value&&f.value.trim()!==""&&(t.search=f.value.trim()),k.get(route("user.patients"),t,{preserveScroll:!0,preserveState:!0})},U=()=>{p.value="all",f.value="",k.get(route("user.patients"),{},{preserveScroll:!0,preserveState:!0})},_=s=>{s&&k.get(s,{},{preserveScroll:!0,preserveState:!0})},P=s=>s?new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A",A=s=>{k.visit(route("user.patients.show",s.id))},M=s=>{b.value=s,o.full_name=s.full_name,o.email=s.email,o.phone_no=s.phone_no,o.gender=s.gender,o.date_of_birth=s.date_of_birth||"",o.address=s.address||"",y.value=!0},N=()=>{a.post(route("user.patients.store"),{onSuccess:()=>{a.reset(),x.value=!1},onError:s=>{console.error("Add patient error:",s)}})},$=()=>{b.value&&o.put(route("user.patients.update",b.value.id),{onSuccess:()=>{o.reset(),y.value=!1,b.value=null},onError:s=>{console.error("Edit patient error:",s)}})},q=s=>{s.key==="Enter"&&v()};return(s,t)=>(m(),g(E,null,[V(r(L),{title:"Manage Patients"}),V(G,null,{default:O(()=>[e("div",T,[e("div",K,[e("div",Q,[t[24]||(t[24]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-800"}," Patients Management "),e("p",{class:"text-gray-600"}," View and manage all registered patients and their test results ")],-1)),e("div",null,[e("button",{onClick:t[0]||(t[0]=l=>x.value=!0),class:"rounded-md bg-primaryDark px-6 py-3 text-base font-semibold text-white transition-all duration-150 hover:-translate-y-1 hover:shadow-lg"}," + Add Patient ")])]),e("div",R,[e("div",H,[e("button",{onClick:t[1]||(t[1]=l=>v("all")),class:D([p.value==="all"?"bg-primaryDark text-white":"bg-gray-200 text-gray-700","rounded-lg px-4 py-2 font-medium transition-all hover:shadow-md"])}," All ",2),e("button",{onClick:t[2]||(t[2]=l=>v("Male")),class:D([p.value==="Male"?"bg-primaryDark text-white":"bg-gray-200 text-gray-700","rounded-lg px-4 py-2 font-medium transition-all hover:shadow-md"])}," Male ",2),e("button",{onClick:t[3]||(t[3]=l=>v("Female")),class:D([p.value==="Female"?"bg-primaryDark text-white":"bg-gray-200 text-gray-700","rounded-lg px-4 py-2 font-medium transition-all hover:shadow-md"])}," Female ",2)]),e("div",I,[e("div",J,[i(e("input",{"onUpdate:modelValue":t[4]||(t[4]=l=>f.value=l),type:"text",placeholder:"Search by name, email or phone...",onKeydown:q,class:"w-full rounded-lg border border-gray-300 px-4 py-2 pl-10 focus:border-transparent focus:ring-2 focus:ring-primaryDark md:w-80"},null,544),[[u,f.value]]),t[25]||(t[25]=e("span",{class:"absolute left-3 top-1/2 -translate-y-1/2 transform text-gray-400"},"ðŸ”",-1))]),e("button",{onClick:t[5]||(t[5]=l=>v()),class:"px-4 py-2 text-sm font-semibold text-white bg-primaryDark rounded-lg hover:bg-primaryDark/90 hover:shadow-lg whitespace-nowrap"}," Search "),e("button",{onClick:U,class:"px-4 py-2 text-sm font-semibold text-white bg-gray-600 rounded-lg hover:bg-gray-700 hover:shadow-lg whitespace-nowrap"}," Clear ")])]),e("div",W,[e("p",null," Showing "+n(d.patients.from||0)+" to "+n(d.patients.to||0)+" of "+n(d.patients.total)+" patients ",1)]),e("div",X,[e("table",Y,[t[27]||(t[27]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-semibold uppercase text-gray-700"}," Name "),e("th",{class:"px-4 py-3 text-left text-xs font-semibold uppercase text-gray-700"}," Email "),e("th",{class:"px-4 py-3 text-left text-xs font-semibold uppercase text-gray-700"}," Phone "),e("th",{class:"px-4 py-3 text-left text-xs font-semibold uppercase text-gray-700"}," Gender "),e("th",{class:"px-4 py-3 text-left text-xs font-semibold uppercase text-gray-700"}," Date of Birth "),e("th",{class:"px-4 py-3 text-left text-xs font-semibold uppercase text-gray-700"}," Total Results "),e("th",{class:"px-4 py-3 text-left text-xs font-semibold uppercase text-gray-700"}," Last Result "),e("th",{class:"px-4 py-3 text-left text-xs font-semibold uppercase text-gray-700"}," Actions ")])],-1)),e("tbody",Z,[(m(!0),g(E,null,z(d.patients.data,l=>(m(),g("tr",{key:l.id,class:"hover:bg-gray-50"},[e("td",ee,n(l.full_name),1),e("td",te,n(l.email),1),e("td",le,n(l.phone_no||"N/A"),1),e("td",re,n(l.gender||"N/A"),1),e("td",se,n(P(l.date_of_birth)),1),e("td",oe,[e("span",ae,n(l.results_count),1)]),e("td",ne,n(l.latest_result?P(l.latest_result.uploaded_at):"N/A"),1),e("td",de,[e("div",ie,[e("button",{onClick:j=>A(l),class:"rounded bg-blue-100 px-3 py-1 text-xs font-medium text-blue-700 transition hover:bg-blue-200"}," View ",8,ue),e("button",{onClick:j=>M(l),class:"rounded bg-green-100 px-3 py-1 text-xs font-medium text-green-700 transition hover:bg-green-200"}," Edit ",8,pe)])])]))),128)),d.patients.data.length===0?(m(),g("tr",be,[...t[26]||(t[26]=[e("td",{colspan:"8",class:"px-4 py-8 text-center text-gray-500"}," No patients found. ",-1)])])):w("",!0)])])]),d.patients.last_page>1?(m(),g("div",ge,[e("button",{onClick:t[6]||(t[6]=l=>_(d.patients.prev_page_url)),disabled:!d.patients.prev_page_url,class:"rounded-lg bg-primaryDark px-4 py-2 text-sm font-semibold text-white transition hover:bg-primaryDark/90 disabled:bg-gray-300 disabled:cursor-not-allowed"}," Previous ",8,me),e("span",fe," Page "+n(d.patients.current_page)+" of "+n(d.patients.last_page),1),e("button",{onClick:t[7]||(t[7]=l=>_(d.patients.next_page_url)),disabled:!d.patients.next_page_url,class:"rounded-lg bg-primaryDark px-4 py-2 text-sm font-semibold text-white transition hover:bg-primaryDark/90 disabled:bg-gray-300 disabled:cursor-not-allowed"}," Next ",8,xe)])):w("",!0),x.value?(m(),g("div",{key:1,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4",onClick:t[15]||(t[15]=h(l=>x.value=!1,["self"]))},[e("div",ye,[t[35]||(t[35]=e("h3",{class:"mb-6 text-2xl font-bold text-gray-800"}," Add New Patient ",-1)),e("form",{onSubmit:h(N,["prevent"]),class:"space-y-4"},[e("div",null,[t[28]||(t[28]=e("label",{class:"block mb-2 text-sm font-bold text-gray-700"}," Full Name * ",-1)),i(e("input",{"onUpdate:modelValue":t[8]||(t[8]=l=>r(a).full_name=l),type:"text",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primaryDark focus:border-transparent",placeholder:"Enter full name"},null,512),[[u,r(a).full_name]])]),e("div",null,[t[29]||(t[29]=e("label",{class:"block mb-2 text-sm font-bold text-gray-700"}," Email * ",-1)),i(e("input",{"onUpdate:modelValue":t[9]||(t[9]=l=>r(a).email=l),type:"email",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primaryDark focus:border-transparent",placeholder:"Enter email address"},null,512),[[u,r(a).email]])]),e("div",null,[t[30]||(t[30]=e("label",{class:"block mb-2 text-sm font-bold text-gray-700"}," Phone Number * ",-1)),i(e("input",{"onUpdate:modelValue":t[10]||(t[10]=l=>r(a).phone_no=l),type:"tel",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primaryDark focus:border-transparent",placeholder:"Enter phone number"},null,512),[[u,r(a).phone_no]])]),e("div",null,[t[32]||(t[32]=e("label",{class:"block mb-2 text-sm font-bold text-gray-700"}," Gender * ",-1)),i(e("select",{"onUpdate:modelValue":t[11]||(t[11]=l=>r(a).gender=l),required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primaryDark focus:border-transparent"},[...t[31]||(t[31]=[e("option",{value:""},"Select gender",-1),e("option",{value:"Male"},"Male",-1),e("option",{value:"Female"},"Female",-1),e("option",{value:"Other"},"Other",-1)])],512),[[F,r(a).gender]])]),e("div",null,[t[33]||(t[33]=e("label",{class:"block mb-2 text-sm font-bold text-gray-700"}," Date of Birth ",-1)),i(e("input",{"onUpdate:modelValue":t[12]||(t[12]=l=>r(a).date_of_birth=l),type:"date",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primaryDark focus:border-transparent"},null,512),[[u,r(a).date_of_birth]])]),e("div",null,[t[34]||(t[34]=e("label",{class:"block mb-2 text-sm font-bold text-gray-700"}," Address ",-1)),i(e("textarea",{"onUpdate:modelValue":t[13]||(t[13]=l=>r(a).address=l),rows:"3",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primaryDark focus:border-transparent",placeholder:"Enter address"},null,512),[[u,r(a).address]])]),e("div",ve,[e("button",{type:"submit",disabled:r(a).processing,class:"flex-1 px-4 py-2 font-semibold text-white bg-primaryDark rounded-lg hover:bg-primaryDark/90 hover:shadow-lg transition disabled:bg-gray-400 disabled:cursor-not-allowed"},n(r(a).processing?"Adding...":"Add Patient"),9,ce),e("button",{type:"button",onClick:t[14]||(t[14]=()=>{x.value=!1,r(a).reset()}),class:"flex-1 px-4 py-2 font-semibold text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300 hover:shadow-lg transition"}," Cancel ")])],32)])])):w("",!0),y.value&&b.value?(m(),g("div",{key:2,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4",onClick:t[23]||(t[23]=h(l=>y.value=!1,["self"]))},[e("div",we,[e("h3",he," Edit Patient: "+n(b.value.full_name),1),e("form",{onSubmit:h($,["prevent"]),class:"space-y-4"},[e("div",null,[t[36]||(t[36]=e("label",{class:"block mb-2 text-sm font-bold text-gray-700"}," Full Name * ",-1)),i(e("input",{"onUpdate:modelValue":t[16]||(t[16]=l=>r(o).full_name=l),type:"text",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primaryDark focus:border-transparent"},null,512),[[u,r(o).full_name]])]),e("div",null,[t[37]||(t[37]=e("label",{class:"block mb-2 text-sm font-bold text-gray-700"}," Email * ",-1)),i(e("input",{"onUpdate:modelValue":t[17]||(t[17]=l=>r(o).email=l),type:"email",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primaryDark focus:border-transparent"},null,512),[[u,r(o).email]])]),e("div",null,[t[38]||(t[38]=e("label",{class:"block mb-2 text-sm font-bold text-gray-700"}," Phone Number * ",-1)),i(e("input",{"onUpdate:modelValue":t[18]||(t[18]=l=>r(o).phone_no=l),type:"tel",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primaryDark focus:border-transparent"},null,512),[[u,r(o).phone_no]])]),e("div",null,[t[40]||(t[40]=e("label",{class:"block mb-2 text-sm font-bold text-gray-700"}," Gender * ",-1)),i(e("select",{"onUpdate:modelValue":t[19]||(t[19]=l=>r(o).gender=l),required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primaryDark focus:border-transparent"},[...t[39]||(t[39]=[e("option",{value:""},"Select gender",-1),e("option",{value:"Male"},"Male",-1),e("option",{value:"Female"},"Female",-1),e("option",{value:"Other"},"Other",-1)])],512),[[F,r(o).gender]])]),e("div",null,[t[41]||(t[41]=e("label",{class:"block mb-2 text-sm font-bold text-gray-700"}," Date of Birth ",-1)),i(e("input",{"onUpdate:modelValue":t[20]||(t[20]=l=>r(o).date_of_birth=l),type:"date",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primaryDark focus:border-transparent"},null,512),[[u,r(o).date_of_birth]])]),e("div",null,[t[42]||(t[42]=e("label",{class:"block mb-2 text-sm font-bold text-gray-700"}," Address ",-1)),i(e("textarea",{"onUpdate:modelValue":t[21]||(t[21]=l=>r(o).address=l),rows:"3",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primaryDark focus:border-transparent"},null,512),[[u,r(o).address]])]),e("div",ke,[e("button",{type:"submit",disabled:r(o).processing,class:"flex-1 px-4 py-2 font-semibold text-white bg-primaryDark rounded-lg hover:bg-primaryDark/90 hover:shadow-lg transition disabled:bg-gray-400 disabled:cursor-not-allowed"},n(r(o).processing?"Updating...":"Update Patient"),9,De),e("button",{type:"button",onClick:t[22]||(t[22]=()=>{y.value=!1,r(o).reset(),b.value=null}),class:"flex-1 px-4 py-2 font-semibold text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300 hover:shadow-lg transition"}," Cancel ")])],32)])])):w("",!0)])])]),_:1})],64))}});export{Ae as default};
