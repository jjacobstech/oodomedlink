import{d as B,u as A,r as w,g as n,e as _,b as $,m as R,w as S,f as t,n as u,x as m,t as a,o as r,F as x,h as p,p as k,s as z,z as D}from"./app--9TzmeXa.js";import{_ as j}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-D3kyMQ7H.js";import{u as U}from"./index-BL5XgNWo.js";import"./index-C9w5Phux.js";import"./x-Viz7HRlK.js";import"./index-wn-F8v27.js";import"./ApplicationLogo.vue_vue_type_script_setup_true_lang-CR7Mcz4D.js";import"./Wind-LiKkUfSx-CmsW8xAD.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const T={class:"flex w-full gap-1 overflow-y-hidden bg-primaryLight"},V={class:"overflow-y-scroll w-full p-4 sm:p-6"},E={class:"mb-6"},L={class:"flex flex-col sm:flex-row justify-between items-start gap-4"},G={class:"flex-1 min-w-0"},Y={class:"text-2xl sm:text-3xl font-bold text-gray-800 break-words"},I={class:"bg-white rounded-xl shadow-md p-4 sm:p-6 mb-6"},K={class:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6"},q={class:"space-y-1"},H={class:"text-base sm:text-lg text-gray-800 break-words"},J={class:"space-y-1"},O={class:"text-base sm:text-lg text-gray-800 break-all"},Q={class:"space-y-1"},W={class:"text-base sm:text-lg text-gray-800"},X={class:"space-y-1"},Z={class:"text-base sm:text-lg text-gray-800"},tt={class:"space-y-1"},et={class:"text-base sm:text-lg text-gray-800"},st={key:0,class:"text-gray-500 text-sm sm:text-base ml-2"},lt={class:"space-y-1"},at={class:"text-base sm:text-lg text-gray-800"},ot={class:"sm:col-span-2 space-y-1"},it={class:"text-base sm:text-lg text-gray-800 break-words"},nt={class:"bg-white rounded-xl shadow-md p-4 sm:p-6"},rt={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 mb-4 pb-2 border-b"},dt={class:"text-lg sm:text-xl font-bold text-gray-800"},mt={key:0,class:"space-y-4"},xt={class:"flex flex-col sm:flex-row justify-between items-start gap-3"},ct={class:"flex-1 w-full min-w-0"},ut={class:"flex flex-wrap items-center gap-2 mb-2"},pt={class:"text-base sm:text-lg font-semibold text-gray-800 break-words"},gt={class:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-4 text-xs sm:text-sm text-gray-600"},bt={class:"w-full sm:w-auto"},ft=["onClick"],yt={key:0,class:"mt-4 pt-4 border-t"},ht={class:"grid grid-cols-1 xs:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2 sm:gap-3"},vt=["onClick"],wt={class:"flex items-center gap-2"},_t={class:"flex-1 min-w-0"},kt=["title"],Dt={class:"text-xs text-gray-500"},Ct={key:1,class:"text-center py-8 sm:py-12 text-gray-500"},Nt={class:"w-full max-w-3xl bg-white rounded-xl shadow-2xl max-h-[90vh] overflow-y-auto"},Ft={class:"sticky top-0 bg-white border-b border-gray-200 p-4 sm:p-6 flex items-start justify-between gap-4"},Mt={class:"p-4 sm:p-6 space-y-4"},Pt={class:"space-y-1"},Bt={class:"text-base sm:text-lg text-gray-800 break-words"},At={class:"space-y-1"},$t={class:"space-y-1"},Rt={class:"text-base sm:text-lg text-gray-800"},St={class:"space-y-2"},zt={class:"text-xs sm:text-sm font-semibold text-gray-500 uppercase"},jt={class:"space-y-2"},Ut={class:"flex items-center gap-3 flex-1 min-w-0"},Tt={class:"min-w-0 flex-1"},Vt={class:"font-medium text-gray-800 text-sm sm:text-base break-all"},Et={class:"text-xs sm:text-sm text-gray-500"},Lt=["onClick"],Gt={class:"border-t p-4 sm:p-6"},Xt=B({__name:"Patient",props:{patient:{}},setup(o){const C=o;A();const{toast:g}=U();w(!1);const d=w(null),b=s=>s?new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A",f=s=>s?new Date(s).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",N=s=>{if(!s)return"N/A";const e=new Date(s),l=new Date;let i=l.getFullYear()-e.getFullYear();const c=l.getMonth()-e.getMonth();return(c<0||c===0&&l.getDate()<e.getDate())&&i--,`${i} years`},F=()=>{D.visit(route("user.patients"))},M=()=>{confirm("Are you sure you want to delete this patient? This action cannot be undone.")&&D.delete(route("user.patients.destroy",C.patient.id),{onSuccess:s=>{g({title:s.props.success?"Patient Deleted":"Patient Deletion Error",description:s.props.success??s.props.error,variant:"default",open:!0,class:"text-primaryDark bg-white shadow-lg bottom-96",duration:1e4})},onError:s=>{g({title:"Deletion Failed",description:"Failed to delete patient. Please try again.",variant:"destructive",duration:5e3})}})},y=s=>{switch(s){case"sent":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"failed":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},P=s=>{d.value=s},h=s=>{window.open(s.file_url,"_blank")},v=s=>{if(s===0)return"0 Bytes";const e=1024,l=["Bytes","KB","MB","GB"],i=Math.floor(Math.log(s)/Math.log(e));return Math.round(s/Math.pow(e,i)*100)/100+" "+l[i]};return(s,e)=>(r(),n(x,null,[_($(R),{title:`Patient: ${o.patient.full_name}`},null,8,["title"]),_(j,null,{default:S(()=>[t("div",T,[t("div",V,[t("div",E,[t("button",{onClick:F,class:"mb-4 flex items-center gap-2 text-primaryDark hover:text-primaryDark/80 font-semibold transition text-sm sm:text-base"},[...e[3]||(e[3]=[t("span",null,"â†",-1),m(" Back to Patients ",-1)])]),t("div",L,[t("div",G,[t("h1",Y,a(o.patient.full_name),1),e[4]||(e[4]=t("p",{class:"text-sm sm:text-base text-gray-600 mt-1"}," Patient Details & Medical Records ",-1))]),t("div",{class:"flex gap-2 sm:gap-3 w-full sm:w-auto"},[t("button",{onClick:M,class:"flex-1 sm:flex-initial rounded-md bg-red-600 px-4 sm:px-5 py-2 sm:py-2.5 text-sm sm:text-base font-semibold text-white transition-all duration-150 hover:-translate-y-1 hover:shadow-lg"}," Delete ")])])]),t("div",I,[e[12]||(e[12]=t("h2",{class:"text-lg sm:text-xl font-bold text-gray-800 mb-4 pb-2 border-b"}," Personal Information ",-1)),t("div",K,[t("div",q,[e[5]||(e[5]=t("label",{class:"text-xs sm:text-sm font-semibold text-gray-500 uppercase"},"Full Name",-1)),t("p",H,a(o.patient.full_name),1)]),t("div",J,[e[6]||(e[6]=t("label",{class:"text-xs sm:text-sm font-semibold text-gray-500 uppercase"},"Email",-1)),t("p",O,a(o.patient.email),1)]),t("div",Q,[e[7]||(e[7]=t("label",{class:"text-xs sm:text-sm font-semibold text-gray-500 uppercase"},"Phone Number",-1)),t("p",W,a(o.patient.phone_no||"N/A"),1)]),t("div",X,[e[8]||(e[8]=t("label",{class:"text-xs sm:text-sm font-semibold text-gray-500 uppercase"},"Gender",-1)),t("p",Z,a(o.patient.gender||"N/A"),1)]),t("div",tt,[e[9]||(e[9]=t("label",{class:"text-xs sm:text-sm font-semibold text-gray-500 uppercase"},"Date of Birth",-1)),t("p",et,[m(a(b(o.patient.date_of_birth))+" ",1),o.patient.date_of_birth?(r(),n("span",st," ("+a(N(o.patient.date_of_birth))+") ",1)):u("",!0)])]),t("div",lt,[e[10]||(e[10]=t("label",{class:"text-xs sm:text-sm font-semibold text-gray-500 uppercase"},"Patient Since",-1)),t("p",at,a(b(o.patient.created_at)),1)]),t("div",ot,[e[11]||(e[11]=t("label",{class:"text-xs sm:text-sm font-semibold text-gray-500 uppercase"},"Address",-1)),t("p",it,a(o.patient.address||"N/A"),1)])])]),t("div",nt,[t("div",rt,[t("h2",dt," Medical Results ("+a(o.patient.results?.length||0)+") ",1),e[13]||(e[13]=t("button",{class:"w-full sm:w-auto rounded-md bg-primaryDark px-4 py-2 text-sm font-semibold text-white transition-all duration-150 hover:shadow-lg"}," + Upload Result ",-1))]),o.patient.results&&o.patient.results.length>0?(r(),n("div",mt,[(r(!0),n(x,null,p(o.patient.results,l=>(r(),n("div",{key:l.id,class:"border border-gray-200 rounded-lg p-3 sm:p-4 hover:shadow-md transition"},[t("div",xt,[t("div",ct,[t("div",ut,[t("h3",pt,a(l.result_type||"Medical Result"),1),t("span",{class:k([y(l.status),"px-2 sm:px-3 py-1 rounded-full text-xs font-semibold uppercase whitespace-nowrap"])},a(l.status),3)]),t("div",gt,[t("div",null,[e[14]||(e[14]=t("span",{class:"font-semibold"},"Uploaded:",-1)),m(" "+a(f(l.uploaded_at)),1)]),t("div",null,[e[15]||(e[15]=t("span",{class:"font-semibold"},"Files:",-1)),m(" "+a(l.files?.length||0)+" file(s) ",1)])])]),t("div",bt,[t("button",{onClick:i=>P(l),class:"w-full sm:w-auto rounded bg-blue-100 px-4 py-2 text-sm font-medium text-blue-700 transition hover:bg-blue-200"}," View Details ",8,ft)])]),l.files&&l.files.length>0?(r(),n("div",yt,[e[17]||(e[17]=t("p",{class:"text-xs sm:text-sm font-semibold text-gray-700 mb-2"}," Attached Files: ",-1)),t("div",ht,[(r(!0),n(x,null,p(l.files,i=>(r(),n("div",{key:i.id,class:"border rounded-lg p-2 sm:p-3 hover:shadow-md transition cursor-pointer",onClick:c=>h(i)},[t("div",wt,[e[16]||(e[16]=t("span",{class:"text-xl sm:text-2xl"},"ðŸ“„",-1)),t("div",_t,[t("p",{class:"text-xs font-medium text-gray-800 truncate",title:i.original_file_name},a(i.original_file_name),9,kt),t("p",Dt,a(v(i.file_size)),1)])])],8,vt))),128))])])):u("",!0)]))),128))])):(r(),n("div",Ct,[...e[18]||(e[18]=[t("div",{class:"text-4xl sm:text-6xl mb-4"},"ðŸ“‹",-1),t("p",{class:"text-base sm:text-lg font-medium"}," No medical results found ",-1),t("p",{class:"text-xs sm:text-sm mt-2 px-4"}," Upload results to start tracking this patient's medical history ",-1)])]))]),d.value?(r(),n("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4",onClick:e[2]||(e[2]=z(l=>d.value=null,["self"]))},[t("div",Nt,[t("div",Ft,[e[19]||(e[19]=t("h3",{class:"text-lg sm:text-2xl font-bold text-gray-800 break-words flex-1"}," Result Details ",-1)),t("button",{onClick:e[0]||(e[0]=l=>d.value=null),class:"flex-shrink-0 text-gray-400 hover:text-gray-600 text-2xl font-bold"}," Ã— ")]),t("div",Mt,[t("div",Pt,[e[20]||(e[20]=t("label",{class:"text-xs sm:text-sm font-semibold text-gray-500 uppercase"},"Result Type",-1)),t("p",Bt,a(d.value.result_type),1)]),t("div",At,[e[21]||(e[21]=t("label",{class:"text-xs sm:text-sm font-semibold text-gray-500 uppercase"},"Status",-1)),t("span",{class:k([y(d.value.status),"inline-block mt-1 px-3 py-1 rounded-full text-xs sm:text-sm font-semibold uppercase"])},a(d.value.status),3)]),t("div",$t,[e[22]||(e[22]=t("label",{class:"text-xs sm:text-sm font-semibold text-gray-500 uppercase"},"Uploaded",-1)),t("p",Rt,a(f(d.value.uploaded_at)),1)]),t("div",St,[t("label",zt,"Files ("+a(d.value.files?.length||0)+")",1),t("div",jt,[(r(!0),n(x,null,p(d.value.files,l=>(r(),n("div",{key:l.id,class:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 p-3 border rounded-lg hover:bg-gray-50"},[t("div",Ut,[e[23]||(e[23]=t("span",{class:"text-2xl"},"ðŸ“„",-1)),t("div",Tt,[t("p",Vt,a(l.original_file_name),1),t("p",Et,a(v(l.file_size)),1)])]),t("button",{onClick:i=>h(l),class:"w-full sm:w-auto px-4 py-2 bg-primaryDark text-white rounded-lg hover:bg-primaryDark/90 transition text-sm font-semibold whitespace-nowrap"}," Download ",8,Lt)]))),128))])])]),t("div",Gt,[t("button",{onClick:e[1]||(e[1]=l=>d.value=null),class:"w-full px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition font-semibold text-sm sm:text-base"}," Close ")])])])):u("",!0)])])]),_:1})],64))}});export{Xt as default};
